!function(){"use strict";const t={WHITE_100:"#f8f8f8",GRAY_500:"#333",GRAY_600:"#40444b",RED_500:"#ff4757",GREEN_500:"#4CAF50",ORANGE_450:"#ff762c",ORANGE_500:"#FFA500",LIGHTER_SHADES:{"#FF5733":"rgba(255, 118, 44, 0.2)","#33FF57":"rgba(51, 255, 87, 0.2)","#3357FF":"rgba(51, 87, 255, 0.2)","#FF33A1":"rgba(255, 51, 161, 0.2)","#33FFF5":"rgba(51, 255, 245, 0.2)"}},e="https://uploads.servicebell.com/cdn-cgi/image/width=320,height=320,f=auto/widget-org-logos/770540926.533a796cc2644e93a2bb3dec2b40c3f2.png",n="https://api.ipify.org?format=json",o="https://ipapi.co",a="/apps/chatbot-api/agent_conversation",r="/apps/chatbot-api/analytics",s="/apps/chatbot-api/get_image",i="/apps/chatbot-api/color-preference",c="/apps/chatbot-api/store_checkout_product",l="/apps/chatbot-api/remove_checkout_product",d="/cart/clear.js",u="/cart/add.js",p="/cart.js",h="gid://shopify/ProductVariant/";function m(){return window.Shopify?.shop||"default-shop-id"}function g(t){return t?"string"==typeof t&&t.startsWith("gid://shopify/ProductVariant/")?parseInt(t.split("/").pop(),10):parseInt(t,10)||null:null}function y(t,e){return t.length===e.length&&t.every(((t,n)=>t.id===e[n].id&&t.qty===e[n].qty))}let f=[];function v(t=[]){f=t,0===t.length?sessionStorage.removeItem("conversationHistory"):sessionStorage.setItem("conversationHistory",JSON.stringify(f))}function w(t="white"){const e=document.createElement("div");return e.className="circular-loader",e.style.borderTopColor=t,e.innerHTML=`\n    <svg class="circular-loader-svg" viewBox="25 25 50 50">\n      <circle \n        class="loader-path" \n        cx="50" \n        cy="50" \n        r="20" \n        fill="none" \n        stroke="${t}"\n        stroke-width="3" \n        stroke-miterlimit="10"\n      />\n    </svg>\n  `,e}function b(t,e,n){document.createElement("div").className="product-slider-container";const o=document.createElement("div");if(o.className="product-slider",t.slice(0,4).forEach((t=>{const a=function(t,e){const n=document.createElement("div");n.className="product-card",n.innerHTML=`\n      <img src="${t.image}" class="product-image">\n      <div class="product-title">${t.title}</div>\n      <div class="product-price">${t.price}</div>\n      <a href="${t.url}" class="view-product-button">View</a>\n      <button class="add-to-cart-button">Add to Cart</button>\n    `;const o=n.querySelector(".add-to-cart-button");return o.style.backgroundColor=e,o.addEventListener("click",(async e=>{e.preventDefault(),o.disabled=!0;const a=w();a.classList.add("button-loader"),o.appendChild(a),o.innerHTML="",o.appendChild(a);try{await new Promise((e=>{n.dispatchEvent(new CustomEvent("addToCart",{detail:t,bubbles:!0,composed:!0})),setTimeout(e,1e3)}))}finally{o.removeChild(a),o.innerHTML="Add to Cart",o.disabled=!1}})),n}(t,e);a.addEventListener("addToCart",(t=>{t.stopPropagation(),n(t.detail)})),o.appendChild(a)})),t.length>0){const t=document.createElement("div");t.className="see-more-container";const n=document.createElement("button");n.className="see-more-button",n.textContent="See More",n.style.backgroundColor=e,n.addEventListener("click",(()=>{window.location.href="/"})),t.appendChild(n),o.appendChild(t)}return o}const C="chatbotCartItems",S="chatbotSessionData";async function E(){const t=await fetch(p,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});return t.ok?await t.json():(console.error("Failed to get cart",t.status,await t.text()),null)}let L=null,_=null,q=!1;function k(){L||(L=function(){const t=document.createElement("div");return t.className="cart-drawer",t.innerHTML='\n      <div class="cart-drawer-header">\n        <h3 class="cart-drawer-title">Added to Cart</h3>\n        <button class="cart-drawer-close">×</button>\n      </div>\n      <div class="cart-drawer-content"></div>\n      <button class="checkout-button">Checkout</button>\n    ',t.style.display="none",t}());const t=document.querySelector(".chat-page");t&&t!==_&&(L.parentNode&&L.parentNode.removeChild(L),t.appendChild(L),_=t,L.querySelector(".cart-drawer-close").addEventListener("click",I),L.querySelector(".checkout-button").addEventListener("click",(async t=>{t.preventDefault();const e=t.target,n=e.textContent,o=w();e.innerHTML="",e.appendChild(o),e.disabled=!0;try{const t=$();await A(t)?window.location.href="/cart":alert("Failed to sync cart. Please try again.")}catch(t){console.error("Checkout error:",t),alert("An error occurred during checkout.")}finally{e.removeChild(o),e.textContent=n,e.disabled=!1}})))}function N(){k(),H($()),O(),function(){document.addEventListener("cart:requestComplete",(t=>R(t))),document.addEventListener("cart:updated",(t=>R(t))),document.addEventListener("cart:change",(t=>R(t)));let t=null,e=0;setInterval((async()=>{try{const n=await E(),o=n?.item_count||0;n?.token===t&&o===e||(t=n?.token,e=o,R({detail:{response:n}}))}catch(t){console.error("Error polling cart:",t)}}),8e3)}()}function T(){k(),L.style.display="block",L.classList.add("open"),L.classList.remove("auto-close")}function I(){L&&(L.classList.remove("open"),L.classList.add("auto-close"))}function H(t){k();const e=L.querySelector(".cart-drawer-content");if(e.innerHTML="",0===t?.length||!t?.length)return void(e.innerHTML="<p>Your cart is empty</p>");const n=document.createDocumentFragment();t.forEach((t=>{const e=function(t){const e=document.createElement("div");return e.className="cart-item",e.innerHTML=`\n      <img src="${t.image}" alt="${t.title}" class="cart-item-image">\n      <div class="cart-item-details">\n        <h4 class="cart-item-title">${t.title}</h4>\n        <p class="cart-item-price">${t.price}</p>\n        <div class="cart-item-actions">\n          <div class="quantity-selector">\n            <button class="quantity-btn minus">-</button>\n            <input type="text" class="quantity-input" value="${t.quantity}" readonly>\n            <button class="quantity-btn plus">+</button>\n          </div>\n        </div>\n      </div>\n    `,e}(t);!function(t,e){t.querySelector(".minus").addEventListener("click",(()=>{x(e,-1),trackEvent("products_added_to_cart",{cart_items:$()})})),t.querySelector(".plus").addEventListener("click",(()=>{x(e,1),trackEvent("products_added_to_cart",{cart_items:$()})}))}(e,t),n.appendChild(e)})),e.appendChild(n)}function O(){const t=$().reduce(((t,e)=>t+e.quantity),0);document.querySelectorAll(".cart-count").forEach((e=>{e.textContent=t,e.style.display=t>0?"flex":"none"}))}function $(){try{return(JSON.parse(localStorage.getItem(C))||[]).map((t=>{const e=g(t.variant_id);return{...t,variant_id:e}}))}catch(t){return console.error("Error parsing cart items",t),[]}}async function x(t,e=1){if(!t.variant_id)return alert("Cannot add to cart, due to some technical issues"),void console.error("Cannot add to cart - product missing variant_id",t);const n=g(t.variant_id);if(!n)return void console.error("Invalid variant ID format",t.variant_id);const o=$(),a=o.find((t=>g(t.variant_id)===n));a?(a.quantity+=e,a.quantity>10&&(a.quantity=10),a.quantity<=0&&(o.splice(o.indexOf(a),1),await async function(t){try{const e=await fetch(l,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t})});if(!e.ok)throw new Error("Failed to remove product from backend cart");return await e.json()}catch(t){return console.error("Error removing product from backend cart:",t),null}}(a.id))):e>0&&(o.push({...t,quantity:Math.min(e,10),variant_id:n,id:t.id,properties:t.properties||{chatbot_added:!0}}),await async function(t){try{const e=await m(),n=JSON.parse(sessionStorage.getItem("chatbotSessionData")||{}),o=new URLSearchParams({shop:e||"",user_id:n?.email||""}),a=`${c}?${o.toString()}`,r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:t.id,product_count:t.quantity,timestamp:(new Date).toISOString()})});if(!r.ok){const t=await r.json();throw new Error(t.message||"Failed to send cart data to backend")}return await r.json()}catch(t){throw console.error("Error sending cart data:",t),t}}({...t,id:t.id,quantity:e})),await M(o),await A(o),T()}async function A(t){if(q)return!0;q=!0;const e=document.querySelectorAll(".chatbot-cart-icon");e.forEach((t=>{t.classList.add("cart-icon-hidden")}));try{const e=await E(),n=e?.items||[];if(!!y(t.map((t=>({id:t.variant_id,qty:t.quantity}))),n.map((t=>({id:t.id,qty:t.quantity})))))return!0;if(!await async function(){const t=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});return t.ok?(await t.json(),!0):(console.error("Failed to clear cart",t.status,await t.text()),!1)}())return!1;if(0===t.length)return!0;const o=await async function(t){const e=t.map((t=>({id:g(t.variant_id),quantity:t.quantity,properties:{chatbot_added:!0}}))).filter((t=>t.id));if(0===e?.length||!e?.length)return console.error("No valid items to add after filtering"),!1;const n=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({items:e}),credentials:"same-origin"});return n.ok?(await n.json(),!0):(console.error("Failed to add items to cart",n.status,await n.text()),!1)}(t);return o}catch(t){return console.error("Error syncing cart:",t),!1}finally{e.forEach((t=>{t.classList.remove("cart-icon-hidden")})),q=!1}}function M(t){try{localStorage.setItem(C,JSON.stringify(t)),H(t),O()}catch(t){console.error("Error saving cart to localStorage",t)}}async function R(t){try{const e=t.detail?.response||await E();e&&await async function(t){if(q)return;const e=$(),n=t.items.map((t=>{const n=e.find((e=>g(e.variant_id)===t.id));return{id:n?n.id:t.id,variant_id:`${h}${t.id}`,title:t.title,price:t.price,image:t.image,quantity:t.quantity,properties:t.properties||{}}})),o=e.map((t=>({id:t.variant_id,qty:t.quantity})));y(n.map((t=>({id:t.variant_id,qty:t.quantity}))),o)||M(n)}(e)}catch(t){console.error("Error handling cart update:",t)}}function j(t,e={}){const n=JSON.parse(sessionStorage.getItem(S))||{};n[t]=(n[t]||0)+1,n.last_activity=(new Date).toISOString(),n.total_chat_interactions||(n.total_chat_interactions=0),(t.includes("message")||t.includes("chat"))&&(n.total_chat_interactions+=1),Object.assign(n,e),sessionStorage.setItem(S,JSON.stringify(n))}let F=!1;function D(){F||(N(),document.querySelectorAll(".chatbot-cart-icon").forEach((t=>{t.addEventListener("click",(t=>{t.stopPropagation(),T()}))})),F=!0)}function J(e,n,o=[],a){const r="string"==typeof e?e:String(e),s=document.querySelector(".message-list");if(!s)return;const i=document.createElement("div");i.className="message-wrapper";const c=function(e,n,o){const a=document.createElement("div");if(a.className=`message ${n}-message`,a.innerHTML=function(t){const e=(t=t.replace(/â€¢/g,"•")).split("\n");let n="",o=!1,a="";for(let t=0;t<e.length;t++){const r=e[t].trim();if(""===r&&t>0&&t<e.length-1){const n=e[t-1].trim(),o=e[t+1].trim();if(n.startsWith("•")&&o.startsWith("•"))continue}r.startsWith("•")?(a&&!o&&(n+=`<p>${a}</p>`,a=""),o||(n+='<ul class="message-list-items">',o=!0),n+=`<li>${r.substring(1).trim()}</li>`):(o&&(n+="</ul>",o=!1),r?a?a+=" "+r:a=r:a&&(n+=`<p>${a}</p>`,a=""))}return o&&(n+="</ul>"),a&&(n+=`<p>${a}</p>`),n}(e),"user"===n){const e=t.LIGHTER_SHADES[o]||"rgba(255, 118, 44, 0.2)";a.style.backgroundColor=e}return a}(r,n,a);if(i.appendChild(c),"bot"===n&&o.length>0){const t=b(o,a,(t=>{!function(t){if(!t.variant_id)return console.error("Product missing required variant_id",t),!1;const e=g(t.variant_id);e?(x({...t,variant_id:e,id:t.id,image:t.image||"",title:t.title||"",price:t.price||"",category:t.category||"",quantity:t.quantity,source:"chatbot"}),j("products_added_to_cart",{cart_items:$()})):console.error("Invalid variant ID format",t.variant_id)}({id:t.id,title:t.title,price:t.price,image:t.image,category:t.category,variant_id:t.variant_id||t.id,quantity:1})}));i.appendChild(t)}if(s.appendChild(i),s.scrollTop=s.scrollHeight,!window.isLoadingHistory&&(function(t,e,n){try{const o=JSON.parse(sessionStorage.getItem("chatMessages")||"[]");o.push({text:t,sender:e,products:n,timestamp:(new Date).toISOString()}),sessionStorage.setItem("chatMessages",JSON.stringify(o))}catch(t){console.error("Error saving message to session storage:",t)}}(e,n,o),"bot"===n)){const t=JSON.parse(sessionStorage.getItem("chatMessages")||"[]");t.length>=2&&t.filter((t=>"user"===t.sender)).pop()}}let P=!1;function G(e){const n=sessionStorage.getItem("conversationHistory");if(n)try{v(JSON.parse(n))}catch(t){console.error("Error parsing conversation history:",t),v()}else v();const o=document.querySelector(".input-box"),r=document.querySelector(".send-button");!function(e){if(!P)try{const n=sessionStorage.getItem("chatMessages");n&&(window.isLoadingHistory=!0,JSON.parse(n).forEach((n=>{J(n.text,n.sender,n.products||[],"user"===n.sender?e:t.GRAY_500)})),window.isLoadingHistory=!1,P=!0)}catch(t){window.isLoadingHistory=!1,console.error("Error loading chat history from session storage:",t)}}(e);const s=async n=>{const r=n&&"string"==typeof n?n:o.value.trim();if(!r)return;if(r.length>200)return void J("The message you submitted was too long, please reload the conversation and submit something shorter.","bot",[],t.GRAY_500);n||(o.value="",o.style.height="auto",o.focus(),o.setSelectionRange(0,0)),j("interactions",{}),J(r,"user",[],e),o.value="",o.style.height="auto";const s=function(t){const e=document.createElement("div");return e.className="typing-indicator",e.style.setProperty("--primary-color",t),e.innerHTML="\n    <span></span>\n    <span></span>\n    <span></span>\n  ",e}(e);document.querySelector(".message-list").appendChild(s);try{const e=JSON.parse(sessionStorage.getItem("chatbotSessionData")||{}),n=e?.email||"",{answer:o,products:s}=await async function(t,e,n){const o=new AbortController,r=setTimeout((()=>o.abort()),6e4),s=new Headers({"Content-Type":"application/json",Accept:"application/json"}),i={id:f.length,user:t,agent:"",timestamp:(new Date).toISOString()};f.push(i),sessionStorage.setItem("conversationHistory",JSON.stringify(f));const c=new URLSearchParams({shopId:e,user_id:n||""}),l=`${a}?${c.toString()}`;try{const t=await fetch(l,{method:"POST",headers:s,body:JSON.stringify({messages:f}),signal:o.signal});if(clearTimeout(r),!t.ok){const e=await t.json();throw new Error(e.message||"Failed to get bot response")}const e=await t.json();return f.length>0&&(f[f.length-1].agent=e.answer,f[f.length-1].timestamp=(new Date).toISOString(),sessionStorage.setItem("conversationHistory",JSON.stringify(f))),{answer:e.answer,products:e.products||[],history:e.hisory||f}}catch(t){throw clearTimeout(r),"AbortError"===t.name?new Error("Request timed out. Please try again."):t}}(r,m(),n);J(o,"bot",s||[],t.GRAY_500)}catch(e){console.error("Chat error:",e),J("Sorry, something went wrong! Can you please try again later.","bot",[],t.GRAY_500)}finally{s.remove(),o.focus(),o.setSelectionRange(0,0)}};window.sendChatMessage=s,o.addEventListener("keypress",(t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),s())})),r.addEventListener("click",(()=>{const t=o.value.trim();t&&s(t)}))}async function W(){const e=await async function(){const e=m();try{const n=await fetch(`${i}?shopId=${encodeURIComponent(e)}`);if(!n.ok)throw new Error("Failed to fetch color");return(await n.json()).color||t.ORANGE_450}catch(e){return console.error("Color fetch error:",e),t.ORANGE_450}}();return function(t){document.documentElement.style.setProperty("--primary-color",t),[".chatbot-toggle-button",".chatbot-header",".send-button",".start-chat-button",".add-to-cart-button",".user-message"].forEach((e=>{document.querySelectorAll(e).forEach((e=>{e.style.backgroundColor=t}))})),document.querySelectorAll(".chat-window, .chat-page, .email-gate-page").forEach((e=>{e.style.borderColor=t}))}(e),e}function Y(){try{const t=sessionStorage.getItem(S);return t?JSON.parse(t):{}}catch(t){return console.error("Failed to parse session data:",t),{}}}async function B(t){try{const e=(await async function(){try{const t=await fetch(n);return await t.json()}catch(t){return console.error("IP fetch failed:",t),{ip:null}}}()).ip||"unknown",a=await async function(t){if("unknown"===t)return{country:"unknown",city:null,region:null};try{const e=await fetch(`${o}/${t}/json/`),n=await e.json();return{country:n.country_name||null,city:n.city||null,region:n.region||null}}catch(t){return console.error("Location fetch failed:",t),{country:null,city:null,region:null}}}(e),r={email:t,ip:e,country:a.country||"unknown",city:a.city||"unknown",region:a.region||"unknown",session_start:(new Date).toISOString(),interactions:0,total_chat_interactions:0,products_added_to_cart:0,cart_items:[]};if(!function(t){try{const e=JSON.stringify({...Y(),...t});return sessionStorage.setItem(S,e),!0}catch(t){return console.error("Failed to update session:",t),!1}}(r))throw new Error("Failed to store session");return Y()}catch(t){throw console.error("Session initialization failed:",t),t}}function X(){return!!Y().email}function z(t,e,n){const o=document.createElement("div");o.className="chatbot-header-glass",o.style.setProperty("--glass-primary",t),o.innerHTML=`\n    <div class="chatbot-header-left">\n      <img src="${n}" alt="Logo" class="chatbot-logo" />\n      <h3 class="chatbot-header-title">${e}</h3>\n    </div>\n  `;const a=function(t){const e=document.createElement("div");e.className="chatbot-cart-icon",e.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n        <circle cx="9" cy="21" r="1"></circle>\n        <circle cx="20" cy="21" r="1"></circle>\n        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>\n      </svg>\n      <span class="cart-count">0</span>\n    ';const n=e.querySelector(".cart-count");return n&&(n.style.backgroundColor=t),e}(t);return o.appendChild(a),o}function U(t,e,n,o){const a=document.createElement("div");a.className="chat-page",a.style.borderColor=e;const r=z(e,t,o);a.appendChild(r);const s=document.createElement("div");s.className="chat-content";const i=function(){const t=document.createElement("div");return t.className="message-list",t}();s.appendChild(i),a.appendChild(s);const c=function(t,e){const n=document.createElement("div");return n.className="user-query-slider",t.forEach((t=>{const o=document.createElement("button");o.className="user-query-button",o.innerText=t,o.onclick=()=>e(t),n.appendChild(o)})),n}(n,(t=>{"function"==typeof window.sendChatMessage&&window.sendChatMessage(t)})),l=function(t){const e=document.createElement("div");e.className="input-component",e.innerHTML='\n      <textarea class="input-box" placeholder="Type your message..." rows="1" maxlength="200"></textarea>\n      <button class="send-button" disabled>Send</button>\n    ';const n=e.querySelector(".input-box"),o=e.querySelector(".send-button");return n.style.resize="none",n.style.overflowY="hidden",n.addEventListener("input",(()=>{n.style.height="auto",n.style.height=`${n.scrollHeight}px`,o.disabled=""===n.value.trim()})),o.style.backgroundColor=t,e}(e);return a.appendChild(c),a.appendChild(l),a}function V(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}const K=["What is the return policy?","How can I track my order?","What are the payment methods?","How do I contact customer support?"];function Z(t,e,n=!1,o){const a=X()?U("Store Assistant",e,K,o):function(t="Store Assistant",e,n){const o=document.createElement("div");o.className="email-gate-page",o.style.borderColor=e,o.innerHTML=`\n    <div class="chatbot-header" style="background-color: ${e}">\n      <img src="${n}" alt="Logo" class="chatbot-logo" />\n      <h3 class="chatbot-header-title">${t}</h3>\n    </div>\n    <div class="email-collection-content">\n      <p>\n        To get started with our chat assistant, please enter your email address. This helps us \n        personalize your experience\n      </p>\n      <input \n        type="email" \n        class="email-input" \n        placeholder="Your email address" \n        required\n        aria-label="Email address"\n        aria-describedby="email-error"\n        >\n      <div id="email-error" class="error-message hidden">Please enter a valid email address</div>\n      <button class="start-chat-button" style="background-color: ${e}">Continue to Chat</button>\n      <button class="skip-button">Continue as Guest</button> \n    </div>\n  `;const a=o.querySelector(".email-input"),r=o.querySelector(".error-message"),s=o.querySelector(".start-chat-button"),i=o.querySelector(".skip-button");return s.addEventListener("click",(async()=>{const t=a.value.trim();if(!V(t))return r.classList.remove("hidden"),void a.focus();const e=s.textContent,n=w();s.innerHTML="",s.appendChild(n),s.disabled=!0;try{await B(t),window.chatbotRenderContent&&window.chatbotRenderContent(!0)}catch(t){console.error("Session initialization failed:",t),r.textContent="Failed to start chat. Please try again.",r.classList.remove("hidden"),s.removeChild(n),s.textContent=e,s.disabled=!1}})),a.addEventListener("input",(()=>{V(a.value.trim())&&r.classList.add("hidden")})),i.addEventListener("click",(async()=>{const t=i.textContent,e=w("black");i.innerHTML="",i.appendChild(e),i.disabled=!0;try{const t=`Anonymous_${Date.now()}`;await B(t),window.chatbotRenderContent&&window.chatbotRenderContent(!0)}catch(n){console.error("Session initialization failed:",n),i.removeChild(e),i.textContent=t,i.disabled=!1}})),o}("Store Assistant",e,o),r=t.querySelector(".chat-page, .email-gate-page");return r&&t.removeChild(r),a.classList.add("hidden"),t.appendChild(a),n&&(a.classList.remove("hidden"),a.classList.add("open")),a}let Q=null,tt=!1;document.addEventListener("DOMContentLoaded",(async()=>{const n=document.getElementById("shopify-chatbot");if(!n)return void console.error("Chatbot container not found");const o=w();n.appendChild(o),n.style.setProperty("--primary-color",t.ORANGE_450),n.style.setProperty("--text-color",t.WHITE_100);const a=await W();n.removeChild(o);const i=m(),c=await async function(t){try{const e=await fetch(`${s}?shopId=${encodeURIComponent(t)}`);if(!e.ok)throw new Error("Failed to fetch image");return(await e.json()).image||null}catch(t){return console.error("Error fetching store image:",t),null}}(i),l=c||e,d=function(t,e){const n=document.createElement("button");return n.className="chatbot-toggle-button",n.innerHTML=`<img src="${e}" alt="Logo" class="chatbot-logo" />`,n.style.backgroundColor=t,n}(a,l);n.appendChild(d),window.chatbotRenderContent=t=>(Q=Z(n,a,t,l),t&&X()&&G(a),Q.classList.contains("chat-page")&&D(),Q),Q=Z(n,a,!1,l),d.addEventListener("click",(()=>{tt=!tt,tt?(Q.classList.remove("hidden"),Q.classList.add("open"),X()&&(G(a),document.querySelector(".input-box")?.focus()),Q.classList.contains("chat-page")&&D()):(Q.classList.remove("open"),Q.classList.add("hidden")),d.innerHTML=tt?' <svg viewBox="0 0 8 6" width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.99953 5.5C4.10856 5.50013 4.21636 5.47701 4.31574 5.43218C4.41513 5.38734 4.50381 5.32183 4.57586 5.24L7.84619 1.52267C7.94956 1.39948 8.00062 1.24075 7.98847 1.0804C7.97632 0.920059 7.90192 0.770831 7.78118 0.664629C7.66043 0.558428 7.50293 0.503682 7.34234 0.512098C7.18176 0.520514 7.03084 0.591424 6.92186 0.709666L4.06219 3.96033C4.05437 3.96926 4.04473 3.97641 4.03393 3.9813C4.02312 3.9862 4.01139 3.98874 3.99953 3.98874C3.98766 3.98874 3.97593 3.9862 3.96512 3.9813C3.95432 3.97641 3.94468 3.96926 3.93686 3.96033L1.07719 0.709666C1.02445 0.646808 0.95967 0.595127 0.886666 0.557662C0.813662 0.520197 0.733906 0.497703 0.652084 0.491504C0.570263 0.485304 0.488028 0.495522 0.410212 0.521559C0.332397 0.547596 0.26057 0.588926 0.198956 0.643119C0.137342 0.697312 0.0871826 0.763274 0.0514265 0.83713C0.0156699 0.910986 -0.00496191 0.991244 -0.00925631 1.07319C-0.0135507 1.15513 -0.00142188 1.23711 0.0264187 1.3143C0.0542589 1.39148 0.0972476 1.46233 0.152859 1.52267L3.42219 5.23867C3.49437 5.32069 3.58319 5.38642 3.68273 5.43148C3.78227 5.47654 3.89026 5.4999 3.99953 5.5Z" fill="currentColor"></path></svg> ':`<img src="${l}" alt="Logo" class="chatbot-logo"/>`})),function(){const t=m();window.addEventListener("beforeunload",(()=>{const e=JSON.parse(sessionStorage.getItem(S));if(e){const n={type:"application/json"},o=new Blob([JSON.stringify({shopId:t,sessionData:e})],n);navigator.sendBeacon(`${r}`,o)}}))}()}))}();
